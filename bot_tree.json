{
  "id": "root",
  "commands": [
    {
      "id": "get_order_state",
      "button_text": "Узнать состояние заказа",
      "condition": "not self.user_is_authorized",
      "text": "Вы можете узнать состояние заказа одним из трех способов: \n1) введите полный номер телефона \n2) введите номер заказа и через пробел последние 4 цифры номера телефона \n3) привяжите номер телефона к боту, нажав кнопку ниже",
      "wait_input": true,
      "handler": "get_order_state",
      "commands": [
        {
          "id": "get_contacts_bind_phone_number",
          "button_text": "Привязать свой номер телефона",
          "request_contact": true,
          "handler": "get_order_state",
          "redirect_on_success": "root"
        }
      ]
    },
    {
      "id": "get_order_state",
      "button_text": "Узнать состояние заказа",
      "condition": "self.user_is_authorized",
      "handler": "get_order_state"
    },
    {
      "id": "get_repair_state",
      "button_text": "Узнать состояние заявки на ремонт",
      "condition": "not self.user_is_authorized",
      "text": "Вы можете узнать состояние заявки одним из двух способов: \n1) Введите номер заявки на ремонт \n2) привяжите номер телефона к боту, нажав кнопку ниже",
      "wait_input": true,
      "handler": "get_repair_state",
      "commands": [
        {
          "id": "get_repair_bind_phone_number",
          "button_text": "Привязать свой номер телефона",
          "request_contact": true,
          "handler": "get_repair_state",
          "redirect_on_success": "root"
        }
      ]
    },
    {
      "id": "get_repair_state",
      "button_text": "Узнать состояние заявки на ремонт",
      "condition": "self.user_is_authorized",
      "handler": "get_repair_state"
    },
    {
      "id": "learning",
      "button_text": "Контакты магазинов",
      "text": "Магазины какого города вас интересуют?",
      "commands": [
        {
          "id": "msk",
          "button_text": "Москва",
          "handler": "get_shop_info"
        },
        {
          "id": "spb",
          "button_text": "Санкт-Петербург",
          "handler": "get_shop_info"
        },
        {
          "id": "vld",
          "button_text": "Абакан",
          "handler": "get_shop_info"
        },
        {
          "id": "vld",
          "button_text": "Владивосток",
          "handler": "get_shop_info"
        },
        {
          "id": "vld",
          "button_text": "Владикавказ",
          "handler": "get_shop_info"
        },
        {
          "id": "vld",
          "button_text": "Красноярск",
          "handler": "get_shop_info"
        },
        {
          "id": "vld",
          "button_text": "Омск",
          "handler": "get_shop_info"
        },
        {
          "id": "vld",
          "button_text": "Тула",
          "handler": "get_shop_info"
        },
        {
          "id": "vld",
          "button_text": "Якутск",
          "handler": "get_shop_info"
        }
      ]
    },
    {
      "id": "get_service_corners",
      "button_text": "Контакты сервис-центров",
      "handler": "get_service_corners"
    }
  ]
}